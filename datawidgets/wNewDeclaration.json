{
	"_id": "551159583414dde81a952eb2",
	"category": "098",
	"description": "",
	"name": "wNewDeclaration",
	"ownerId": "",
	"requestDate": "2015-04-01T22:50:03.730Z",
	"src": "{\n\t\"properties\": {\n\t\t\"title\": {\n\t\t\t\"label\": \"\",\n\t\t\t\"visible\": true,\n\t\t\t\"color\": \"\"\n\t\t},\n\t\t\"tools\": {\n\t\t\t\"color\": true,\n\t\t\t\"edit\": true,\n\t\t\t\"collapse\": true,\n\t\t\t\"fullscreen\": true,\n\t\t\t\"delete\": true\n\t\t},\n\t\t\"sortable\": true\n\t},\n\t\"definition\": [\n\t\t{\n\t\t\t\"id\": \"root\",\n\t\t\t\"type\": \"panel\",\n\t\t\t\"attributes\": {\n\t\t\t\t\"name\": {\n\t\t\t\t\t\"value\": \"pnlPanel1\"\n\t\t\t\t},\n\t\t\t\t\"controller\": {\n\t\t\t\t\t\"value\": \"wNewDeclarationController\"\n\t\t\t\t},\n\t\t\t\t\"form\": {\n\t\t\t\t\t\"value\": \"wNewDeclarationForm\"\n\t\t\t\t},\n\t\t\t\t\"model\": {\n\t\t\t\t\t\"value\": \"\"\n\t\t\t\t},\n\t\t\t\t\"useModel\": {\n\t\t\t\t\t\"value\": false\n\t\t\t\t},\n\t\t\t\t\"collapsible\": {\n\t\t\t\t\t\"value\": false\n\t\t\t\t},\n\t\t\t\t\"classes\": {\n\t\t\t\t\t\"value\": \"\"\n\t\t\t\t},\n\t\t\t\t\"style\": {\n\t\t\t\t\t\"value\": \"\"\n\t\t\t\t},\n\t\t\t\t\"display\": {\n\t\t\t\t\t\"value\": \"\"\n\t\t\t\t},\n\t\t\t\t\"title\": {\n\t\t\t\t\t\"value\": \"\"\n\t\t\t\t},\n\t\t\t\t\"titleVisible\": {\n\t\t\t\t\t\"value\": false\n\t\t\t\t},\n\t\t\t\t\"layout\": {\n\t\t\t\t\t\"rows\": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\"cols\": [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\"width\": {\n\t\t\t\t\t\t\t\t\t\t\"value\": \"12\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\"classes\": {\n\t\t\t\t\t\t\t\t\t\t\"value\": \"\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\"dynamicClasses\": {\n\t\t\t\t\t\t\t\t\t\t\"value\": \"\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\"style\": {\n\t\t\t\t\t\t\t\t\t\t\"value\": \"\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\"orientation\": {\n\t\t\t\t\t\t\t\t\t\t\"value\": \"vertical\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\"alignment\": {\n\t\t\t\t\t\t\t\t\t\t\"value\": \"start\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\"disposition\": {\n\t\t\t\t\t\t\t\t\t\t\"value\": \"space_around\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\"css\": {\n\t\t\t\t\t\t\t\t\t\t\"color\": \"\",\n\t\t\t\t\t\t\t\t\t\t\"background\": \"\",\n\t\t\t\t\t\t\t\t\t\t\"padding\": \"\",\n\t\t\t\t\t\t\t\t\t\t\"text-align\": \"\"\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\"classes\": {\n\t\t\t\t\t\t\t\t\"value\": \"\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\"dynamicClasses\": {\n\t\t\t\t\t\t\t\t\"value\": \"\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\"style\": {\n\t\t\t\t\t\t\t\t\"value\": \"\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\t\"classes\": {\n\t\t\t\t\t\t\"value\": \"\"\n\t\t\t\t\t},\n\t\t\t\t\t\"dynamicClasses\": {\n\t\t\t\t\t\t\"value\": \"\"\n\t\t\t\t\t},\n\t\t\t\t\t\"style\": {\n\t\t\t\t\t\t\"value\": \"\"\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t\"children\": [\n\t\t\t\t{\n\t\t\t\t\t\"id\": 7315,\n\t\t\t\t\t\"type\": \"statictext\",\n\t\t\t\t\t\"attributes\": {\n\t\t\t\t\t\t\"name\": {\n\t\t\t\t\t\t\t\"value\": \"txtText1\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"bind\": {\n\t\t\t\t\t\t\t\"value\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"text\": {\n\t\t\t\t\t\t\t\"value\": \"Soumettre une d√©claration\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"display\": {\n\t\t\t\t\t\t\t\"value\": \"true\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"tooltip\": {\n\t\t\t\t\t\t\t\"value\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"tooltipPosition\": {\n\t\t\t\t\t\t\t\"value\": \"top\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"counter\": {\n\t\t\t\t\t\t\t\"bind\": {\n\t\t\t\t\t\t\t\t\"value\": \"\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\"onclick\": {\n\t\t\t\t\t\t\t\t\"value\": \"\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\"position\": {\n\t\t\t\t\t\t\t\t\"value\": \"left\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"onclick\": {\n\t\t\t\t\t\t\t\"value\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"classes\": {\n\t\t\t\t\t\t\t\"value\": \"lead\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"dynamicClasses\": {\n\t\t\t\t\t\t\t\"value\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"style\": {\n\t\t\t\t\t\t\t\"value\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"css\": {\n\t\t\t\t\t\t\t\"width\": \"\",\n\t\t\t\t\t\t\t\"height\": \"\",\n\t\t\t\t\t\t\t\"color\": \"\",\n\t\t\t\t\t\t\t\"background\": \"\",\n\t\t\t\t\t\t\t\"padding\": \"\",\n\t\t\t\t\t\t\t\"margin\": \"\",\n\t\t\t\t\t\t\t\"text-align\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"containerClasses\": {\n\t\t\t\t\t\t\t\"value\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"containerDynamicClasses\": {\n\t\t\t\t\t\t\t\"value\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"containerStyle\": {\n\t\t\t\t\t\t\t\"value\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"containerCss\": {\n\t\t\t\t\t\t\t\"width\": \"\",\n\t\t\t\t\t\t\t\"height\": \"\",\n\t\t\t\t\t\t\t\"color\": \"\",\n\t\t\t\t\t\t\t\"background\": \"\",\n\t\t\t\t\t\t\t\"padding\": \"\",\n\t\t\t\t\t\t\t\"margin\": \"\",\n\t\t\t\t\t\t\t\"text-align\": \"\"\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t\"children\": [],\n\t\t\t\t\t\"container\": \"layout_0_row_0_column_0\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": 18798,\n\t\t\t\t\t\"type\": \"html\",\n\t\t\t\t\t\"attributes\": {\n\t\t\t\t\t\t\"name\": {\n\t\t\t\t\t\t\t\"value\": \"fieldTextArea2\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"html\": {\n\t\t\t\t\t\t\t\"value\": \"<div id=\\\"dsn_dropzone\\\" class=\\\"dropzone\\\"></div>\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"property\": {\n\t\t\t\t\t\t\t\"value\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"display\": {\n\t\t\t\t\t\t\t\"value\": \"true\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"containerClasses\": {\n\t\t\t\t\t\t\t\"value\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"containerDynamicClasses\": {\n\t\t\t\t\t\t\t\"value\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"containerCss\": {\n\t\t\t\t\t\t\t\"width\": \"400px\",\n\t\t\t\t\t\t\t\"height\": \"\",\n\t\t\t\t\t\t\t\"color\": \"\",\n\t\t\t\t\t\t\t\"background\": \"\",\n\t\t\t\t\t\t\t\"padding\": \"\",\n\t\t\t\t\t\t\t\"margin\": \"\",\n\t\t\t\t\t\t\t\"text-align\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"containerStyle\": {\n\t\t\t\t\t\t\t\"value\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"classes\": {\n\t\t\t\t\t\t\t\"value\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"dynamicClasses\": {\n\t\t\t\t\t\t\t\"value\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"css\": {\n\t\t\t\t\t\t\t\"width\": \"\",\n\t\t\t\t\t\t\t\"height\": \"\",\n\t\t\t\t\t\t\t\"color\": \"\",\n\t\t\t\t\t\t\t\"background\": \"\",\n\t\t\t\t\t\t\t\"padding\": \"\",\n\t\t\t\t\t\t\t\"margin\": \"\",\n\t\t\t\t\t\t\t\"text-align\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"style\": {\n\t\t\t\t\t\t\t\"value\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"onclick\": {\n\t\t\t\t\t\t\t\"value\": \"\"\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t\"children\": [],\n\t\t\t\t\t\"container\": \"layout_0_row_0_column_0\"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": 4028,\n\t\t\t\t\t\"type\": \"button\",\n\t\t\t\t\t\"attributes\": {\n\t\t\t\t\t\t\"name\": {\n\t\t\t\t\t\t\t\"value\": \"btnButton1\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"label\": {\n\t\t\t\t\t\t\t\"value\": \"Valider\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"icon\": {\n\t\t\t\t\t\t\t\"value\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"iconPosition\": {\n\t\t\t\t\t\t\t\"value\": \"left\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"tooltip\": {\n\t\t\t\t\t\t\t\"value\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"tooltipPosition\": {\n\t\t\t\t\t\t\t\"value\": \"top\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"display\": {\n\t\t\t\t\t\t\t\"value\": \"true\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"disabled\": {\n\t\t\t\t\t\t\t\"value\": \"false\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"containerClasses\": {\n\t\t\t\t\t\t\t\"value\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"containerDynamicClasses\": {\n\t\t\t\t\t\t\t\"value\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"containerCss\": {\n\t\t\t\t\t\t\t\"width\": \"\",\n\t\t\t\t\t\t\t\"height\": \"\",\n\t\t\t\t\t\t\t\"color\": \"\",\n\t\t\t\t\t\t\t\"background\": \"\",\n\t\t\t\t\t\t\t\"padding\": \"\",\n\t\t\t\t\t\t\t\"margin\": \"20px\",\n\t\t\t\t\t\t\t\"text-align\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"containerStyle\": {\n\t\t\t\t\t\t\t\"value\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"classes\": {\n\t\t\t\t\t\t\t\"value\": \"btn-primary save_files\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"dynamicClasses\": {\n\t\t\t\t\t\t\t\"value\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"css\": {\n\t\t\t\t\t\t\t\"width\": \"\",\n\t\t\t\t\t\t\t\"height\": \"\",\n\t\t\t\t\t\t\t\"color\": \"\",\n\t\t\t\t\t\t\t\"background\": \"\",\n\t\t\t\t\t\t\t\"padding\": \"\",\n\t\t\t\t\t\t\t\"margin\": \"\",\n\t\t\t\t\t\t\t\"text-align\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"style\": {\n\t\t\t\t\t\t\t\"value\": \"\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"onclick\": {\n\t\t\t\t\t\t\t\"value\": \"\"\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t\"children\": [],\n\t\t\t\t\t\"container\": \"layout_0_row_0_column_0\"\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\t],\n\t\"resources\": [\n\t\t{\n\t\t\t\"name\": \"dsnResource\"\n\t\t}\n\t]\n}",
	"src_script": "// this line should not be removed\r\nvar wNewDeclaration = angular.module(\"wNewDeclaration\",[]);\r\n\r\nwNewDeclaration.controller( \"wNewDeclarationController\", function( $scope, $window, $timeout ) {\r\n    // need to change URL!\r\n    //console.log(\"roles = \", $scope.user.roles)\r\n    var needRole = 'uploader';\r\n    var dropzone = null;\r\n    if($window.UploadFiles){\r\n        dropzone = $window.UploadFiles.run({url:'/studio/resources/uploadToDsn/myUploadedFiles', roles:'', siren:'987654321'});    \r\n    }\r\n    \r\n    $timeout( function() {\r\n        if(!$scope.user || !$scope.user.roles || $scope.user.roles.list.indexOf(needRole) ==-1) {\r\n            angular.element('.save_files').attr('disabled', true);\r\n        }\r\n    }, 500);\r\n    \r\n    $scope.sendForm = function(){\r\n        if($scope.user && $scope.user.roles) {\r\n            $scope.roles = $scope.user.roles;\r\n            if($scope.user.roles.list.indexOf(needRole) ==-1 ) {\r\n                alert(\"You do not have permission to add a new declaration!\");\r\n                return false;\r\n            }\r\n        } else {\r\n            console.log('Undefined user roles!');\r\n            return false;\r\n        }\r\n        $window.UploadFiles.setRoles(needRole);\r\n        $window.UploadFiles.saveFiles();\r\n        if(dropzone){\r\n            dropzone.on(\"complete\", function(file) {\r\n                try {\r\n                    loadURL('mydeclarations.html');    \r\n                } catch(e) {\r\n                    console.log(e)\r\n                }\r\n            });\r\n            \r\n        }\r\n    };\r\n});",
	"src_styles": "",
	"versioning": {
		"DhatimDsn": {
			"last_action": "1427928847",
			"status": "committed",
			"user": "admin"
		}
	},
	"wtype": "visual"
}